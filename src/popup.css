/* ============================
   AI Impact Tracker — CSS v3
   ============================ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:          #0d0f0d;
  --bg-card:     #131713;
  --bg-card2:    #161a16;
  --border:      #2a332a;
  --green:       #4ade80;
  --green-dim:   #1e3a24;
  --orange:      #fb923c;
  --orange-dim:  #3a1e0d;
  --blue:        #38bdf8;
  --blue-dim:    #0d2a3a;
  --red:         #f87171;
  --red-dim:     #3a0d0d;
  --yellow:      #fbbf24;
  --yellow-dim:  #2d2008;
  --text:        #e8f0e8;
  --text-muted:  #9ab09a;
  --text-dim:    #5a6b5a;
  --accent:      #4ade80;
  --font-mono:   'Space Mono', monospace;
  --font-display:'Syne', sans-serif;
}

body {
  width: 320px;
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-display);
  font-size: 13px;
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
}
.app { overflow: hidden; }

/* ---- HEADER ---- */
.header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 16px 12px;
  border-bottom: 1px solid var(--border);
  background: var(--bg-card);
}
.header-left { display: flex; align-items: center; gap: 10px; }
.logo {
  width: 34px; height: 34px;
  background: var(--green-dim); border: 1px solid var(--green);
  border-radius: 8px; display: flex; align-items: center; justify-content: center;
  font-size: 17px;
}
.title   { font-size: 15px; font-weight: 800; color: var(--text); letter-spacing: -0.3px; line-height: 1; }
.subtitle{ font-size: 9px; color: var(--accent); font-family: var(--font-mono); letter-spacing: 2px; text-transform: uppercase; }
.btn-reset {
  background: none; border: 1px solid var(--border); color: var(--text-muted);
  width: 28px; height: 28px; border-radius: 6px; cursor: pointer; font-size: 14px;
  display: flex; align-items: center; justify-content: center; transition: all 0.15s;
}
.btn-reset:hover { border-color: var(--red); color: var(--red); background: var(--red-dim); }

/* ---- TABS ---- */
.tabs {
  display: flex; background: var(--bg-card);
  border-bottom: 1px solid var(--border);
}
.tab {
  flex: 1; padding: 9px 0; font-size: 11px; font-weight: 700;
  font-family: var(--font-display); color: var(--text-dim);
  background: none; border: none; cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.15s; text-transform: uppercase; letter-spacing: 0.5px;
}
.tab:hover  { color: var(--text-muted); }
.tab.active { color: var(--green); border-bottom-color: var(--green); }

/* ---- TAB CONTENT ---- */
.tab-content       { display: none; }
.tab-content.active{ display: block; }

/* ---- HERO ---- */
.hero-card {
  background: var(--bg-card); border-bottom: 1px solid var(--border);
  padding: 18px 16px 14px; text-align: center; position: relative; overflow: hidden;
}
.hero-card::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(ellipse at 50% 0%, rgba(74,222,128,0.06) 0%, transparent 70%);
  pointer-events: none;
}
.tree-visual {
  font-size: 32px; line-height: 1; margin-bottom: 7px; display: block;
  filter: drop-shadow(0 0 10px rgba(74,222,128,0.3)); transition: transform 0.3s;
}
.tree-visual:hover { transform: scale(1.1); }
.hero-number {
  font-family: var(--font-mono); font-size: 28px; font-weight: 700;
  color: var(--green); line-height: 1; letter-spacing: -1px; margin-bottom: 3px;
}
.hero-label { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 7px; }
.hero-sub {
  font-family: var(--font-mono); font-size: 10px; color: var(--text-dim);
  background: var(--bg-card2); border: 1px solid var(--border);
  border-radius: 20px; display: inline-block; padding: 2px 10px;
}

/* ---- METRICS GRID ---- */
.metrics-grid {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 1px; background: var(--border); border-bottom: 1px solid var(--border);
}
.metric-card {
  background: var(--bg-card2); padding: 12px 13px;
  position: relative; transition: background 0.15s;
}
.metric-card:hover { background: #1a201a; }
.metric-card::before {
  content: ''; position: absolute; top: 0; left: 0;
  width: 3px; height: 100%; border-radius: 0 2px 2px 0;
}
.metric-card[data-color="green"]::before  { background: var(--green); }
.metric-card[data-color="orange"]::before { background: var(--orange); }
.metric-card[data-color="blue"]::before   { background: var(--blue); }
.metric-card[data-color="red"]::before    { background: var(--red); }
.metric-icon { font-size: 14px; margin-bottom: 4px; }
.metric-value { font-family: var(--font-mono); font-size: 15px; font-weight: 700; line-height: 1.1; }
.metric-card[data-color="green"]  .metric-value { color: var(--green); }
.metric-card[data-color="orange"] .metric-value { color: var(--orange); }
.metric-card[data-color="blue"]   .metric-value { color: var(--blue); }
.metric-card[data-color="red"]    .metric-value { color: var(--red); }
.metric-unit { font-size: 9px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.4px; font-family: var(--font-mono); margin-top: 1px; }
.metric-card[data-color="green"]  .metric-unit { color: #6ee89a; }
.metric-card[data-color="orange"] .metric-unit { color: #fdb07a; }
.metric-card[data-color="blue"]   .metric-unit { color: #7dd4fc; }
.metric-card[data-color="red"]    .metric-unit { color: #fca5a5; }
.metric-label { font-size: 9px; color: var(--text-muted); margin-top: 3px; line-height: 1.3; }

/* ---- PLATFORMS ---- */
.platforms-section { padding: 11px 16px; border-bottom: 1px solid var(--border); }
.section-title {
  font-size: 9px; font-family: var(--font-mono); color: var(--text-dim);
  text-transform: uppercase; letter-spacing: 2px; margin-bottom: 7px;
}
.platforms-list { display: flex; flex-direction: column; gap: 4px; }
.no-data { font-size: 11px; color: var(--text-dim); font-style: italic; padding: 2px 0; }
.platform-row {
  display: flex; align-items: center; gap: 8px;
  padding: 5px 8px; background: var(--bg-card2);
  border: 1px solid var(--border); border-radius: 6px;
}
.platform-icon { font-size: 13px; width: 18px; text-align: center; flex-shrink: 0; }
.platform-name { font-size: 11px; font-weight: 600; color: var(--text); flex: 1; text-transform: capitalize; }
.platform-count {
  font-family: var(--font-mono); font-size: 10px;
  color: var(--green); background: var(--green-dim);
  border-radius: 10px; padding: 1px 7px; flex-shrink: 0;
}

/* ════════════════════════════════
   STATS TAB
   ════════════════════════════════ */
.stat-block {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
}

/* Comparatif semaines */
.week-compare {
  display: flex; align-items: center; gap: 0;
  background: var(--bg-card2); border: 1px solid var(--border);
  border-radius: 10px; padding: 12px; margin-top: 2px;
  position: relative;
}
.week-col { flex: 1; text-align: center; }
.week-col.current .week-value { color: var(--green); }
.week-label { font-size: 9px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
.week-value { font-family: var(--font-mono); font-size: 20px; font-weight: 700; color: var(--text-muted); line-height: 1; }
.week-sub   { font-size: 9px; color: var(--text-dim); margin-top: 3px; font-family: var(--font-mono); }
.week-arrow { font-size: 14px; color: var(--border); padding: 0 4px; flex-shrink: 0; }
.week-delta {
  position: absolute; top: 8px; right: 10px;
  font-size: 10px; font-weight: 700; font-family: var(--font-mono);
  border-radius: 4px; padding: 2px 6px;
}
.week-delta.up   { color: var(--red);   background: var(--red-dim); }
.week-delta.down { color: var(--green); background: var(--green-dim); }
.week-delta.same { color: var(--text-dim); background: var(--bg-card); }

/* Courbe SVG */
.chart-wrap {
  background: var(--bg-card2); border: 1px solid var(--border);
  border-radius: 8px; padding: 10px 10px 0;
  margin-top: 4px; overflow: hidden;
}
#chartSvg {
  width: 100%; height: 80px; display: block;
  overflow: visible;
}
.chart-labels {
  display: flex; justify-content: space-between;
  padding: 4px 2px 6px;
}
.chart-lbl {
  font-size: 8px; color: var(--text-dim);
  font-family: var(--font-mono);
  text-align: center; flex: 1;
}
.chart-legend {
  display: flex; align-items: center; gap: 5px;
  margin-top: 5px; font-size: 9px; color: var(--text-dim);
}
.legend-dot {
  width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0;
}

/* Top plateforme */
.top-platform { margin-top: 4px; }
.top-row {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 12px; background: var(--bg-card2);
  border: 1px solid var(--green-dim); border-radius: 8px;
  margin-bottom: 5px;
}
.top-rank {
  font-family: var(--font-mono); font-size: 11px;
  color: var(--text-dim); width: 16px; flex-shrink: 0;
}
.top-icon  { font-size: 16px; flex-shrink: 0; }
.top-info  { flex: 1; }
.top-name  { font-size: 12px; font-weight: 700; color: var(--text); text-transform: capitalize; }
.top-msgs  { font-size: 9px; color: var(--text-dim); font-family: var(--font-mono); margin-top: 1px; }
.top-bar-wrap { width: 60px; flex-shrink: 0; }
.top-bar-bg {
  background: var(--border); border-radius: 3px;
  height: 4px; overflow: hidden;
}
.top-bar-fill {
  height: 100%; border-radius: 3px;
  background: var(--green); transition: width 0.4s ease;
}
.top-row:nth-child(2) .top-bar-fill { background: var(--orange); }
.top-row:nth-child(3) .top-bar-fill { background: var(--blue); }

/* ---- FOOTER ---- */
.footer {
  padding: 7px 16px; display: flex; align-items: center; gap: 6px;
  font-size: 10px; color: var(--text-dim); font-family: var(--font-mono);
}
.footer-dot  { color: var(--border); }
.footer-link { color: var(--green); text-decoration: none; opacity: 0.7; transition: opacity 0.15s; }
.footer-link:hover { opacity: 1; }

/* ---- ANIMATIONS ---- */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}
.hero-card   { animation: fadeIn 0.2s ease both; }
.metric-card { animation: fadeIn 0.2s ease both; }
.metric-card:nth-child(1) { animation-delay: 0.04s; }
.metric-card:nth-child(2) { animation-delay: 0.08s; }
.metric-card:nth-child(3) { animation-delay: 0.12s; }
.metric-card:nth-child(4) { animation-delay: 0.16s; }
.stat-block  { animation: fadeIn 0.2s ease both; }

/* ---- MODAL ---- */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.75);
  display: flex; align-items: center; justify-content: center; z-index: 100;
  animation: fadeIn 0.15s ease;
}
.modal {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: 10px; padding: 20px; width: 250px; text-align: center;
}
.modal h3 { font-size: 13px; font-weight: 800; margin-bottom: 7px; }
.modal p  { font-size: 11px; color: var(--text-muted); margin-bottom: 15px; }
.modal-btns { display: flex; gap: 8px; justify-content: center; }
.btn-confirm {
  background: var(--red-dim); border: 1px solid var(--red); color: var(--red);
  border-radius: 6px; padding: 6px 14px; font-size: 11px; font-weight: 700;
  cursor: pointer; font-family: var(--font-display); transition: background 0.15s;
}
.btn-confirm:hover { background: #5a1515; }
.btn-cancel {
  background: var(--bg-card2); border: 1px solid var(--border); color: var(--text-muted);
  border-radius: 6px; padding: 6px 14px; font-size: 11px; font-weight: 700;
  cursor: pointer; font-family: var(--font-display); transition: background 0.15s;
}
.btn-cancel:hover { background: var(--bg); }
